import { Stage2Logic } from './stage-2-logic.js';
import { Stage2Visualization } from './stage-2-visualization.js';
import { Stage2Control } from './stage-2-control.js';
import { store } from '../../modules/store.js';

export class Stage2 {
    constructor() {
        this.visibilityRange = { u: { min: 0.49, max: 0.5 }, v: { min: 0.4, max: 0.6 } };
        this.logic = new Stage2Logic(this.visibilityRange);
        this.visualization = new Stage2Visualization(this.visibilityRange);
        this.control = new Stage2Control(this.logic, this.visualization, this.visibilityRange);
    }

    async transitionTo() {
        await this.visualization.transitionTo(this.visibilityRange);
        this.logic.initializeStage();
    }

    async transitionFrom() {
        await this.visualization.transitionFrom();
    }

    update(deltaTime) {
        this.control.update(deltaTime);
    }
}